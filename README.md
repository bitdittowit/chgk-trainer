# CHGK Alphabet Trainer

Веб-приложение для тренировки команды ЧГК по ассоциациям с буквами русского алфавита.

## Стек технологий
- **Next.js** (App Router, TypeScript)
- **Tailwind CSS**
- **shadcn/ui** — библиотека компонентов
- **next-auth** — аутентификация через Google и Яндекс
- **Upstash Redis** — real-time синхронизация состояния комнат
- **Socket.io** — мгновенная синхронизация между клиентами
- **Zustand + Immer** — управление состоянием на клиенте
- **dnd-kit** — drag-and-drop для очередности игроков

## Архитектура
- **Монорепозиторий** (src/app — страницы, src/lib — утилиты)
- **API-роуты** Next.js для аутентификации и real-time
- **Socket.io** для real-time событий (таймеры, ходы, уведомления)
- **Upstash Redis** для хранения состояния комнат

## Флоу пользователя
1. Пользователь заходит на сайт, может создать комнату.
2. После создания комнаты появляется ссылка для приглашения других участников.
3. При переходе по ссылке — вход через Google или Яндекс.
4. После входа — страница с алфавитом, таймерами и очередностью игроков.
5. Каждый игрок видит таймеры всех участников в реальном времени, может ставить на паузу, сбрасывать, передавать ход, менять порядок игроков drag-and-drop, удалять игроков.
6. При перезагрузке страницы состояние комнаты и ход не теряются.

## Разработка
- `npm run dev` — запуск локально
- Все ключи и секреты хранятся в `.env.local`
- Для Upstash Redis нужен бесплатный аккаунт
- Для OAuth — Google и Яндекс приложения

## TODO
- [ ] Реализация аутентификации
- [x] Реализация real-time синхронизации алфавита через socket.io
- [x] Реализация real-time таймеров и очередности игроков
- [x] Передача хода, удаление игрока, отображение таймеров всех игроков
- [x] Drag-and-drop очередности
- [x] Уведомления и real-time события (пауза, сброс, кик, вход/выход, передача хода)
- [x] Аватарки игроков
- [x] Сохранение состояния комнат в Redis (Upstash)
- [ ] Финальный UI-полиш и тесты

## Архитектурные детали
- Состояние вычеркнутых букв хранится в памяти сервера (Map), позже будет вынесено в Redis для масштабирования.
- Все события socket.io namespaced по roomId, чтобы не было утечек между комнатами.
- Для production рекомендуется вынести socket.io сервер в отдельный процесс или использовать edge-compatible WebSocket сервис.

---

Pull requests и вопросы приветствуются!
